(function(t){function e(e){for(var s,r,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(d.length)d.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={popup:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("0a3d")},"0224":function(t,e,a){},"0575":function(t,e,a){"use strict";a("5002")},"0a3d":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("PageHeader"),a("transition",{attrs:{name:t.transitionDirectionY,mode:"out-in"}},[this.$router.currentRoute.meta.depth>1&&this.$store.state.apiStatus?a("BackButton"):t._e()],1),a("transition",{attrs:{name:t.transitionDirectionX,mode:"out-in"}},[a("router-view")],1)],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"back-button"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns"},[a("a",{staticClass:"back-btn",attrs:{"aria-label":"Go back"},on:{click:function(e){return t.$router.go(-1)}}},[a("span",{staticClass:"icon material-icons"},[t._v("arrow_back")]),a("span",{staticClass:"str"},[t._v("Back")])])])])])},o=[],c={name:"BackButton"},u=c,l=(a("26b3"),a("2877")),p=Object(l["a"])(u,r,o,!1,null,null,null),d=p.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"row align-center"},[t._m(0),"apiSetup"!==this.$route.name?a("div",{staticClass:"columns"},[a("router-link",{staticClass:"api-settings-btn",attrs:{to:"/api-setup"}},[a("span",{staticClass:"material-icons"},[t._v("settings")])])],1):t._e()])])},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns"},[s("img",{staticClass:"logo",attrs:{src:a("183a"),alt:"WP Engine Mini logo"}})])}],f=(a("b0c0"),{name:"Header",computed:{currentRouteName:function(){return this.$route.name}}}),v=f,w=(a("d748"),Object(l["a"])(v,m,h,!1,null,"385cc2a6",null)),_=w.exports,b={components:{BackButton:d,PageHeader:_},data:function(){return{transitionDirectionX:"slide-left",transitionDirectionY:"slide-up"}},mounted:function(){},watch:{$route:function(t,e){var a=t.meta.depth,s=e.meta.depth;this.transitionDirectionX=a<s?"slide-right":"slide-left",this.transitionDirectionY="slide-up"}}},g=b,k=(a("11aa"),Object(l["a"])(g,i,n,!1,null,null,null)),y=k.exports,S=a("2f62"),C=a("bfa9");s["a"].use(S["a"]);var $=new C["a"]({key:"wpemini",storage:window.localStorage}),P=new S["a"].Store({plugins:[$.plugin],state:{apiStatus:!1,wpeUid:"",wpePwd:"",installsList:"",backupEmail:""},actions:{updateApiStatus:function(t,e){var a=t.commit;a("updateApiStatus",e)},updateWpeUid:function(t,e){var a=t.commit;a("updateWpeUid",e)},updateWpePwd:function(t,e){var a=t.commit;a("updateWpePwd",e)},updateInstallsList:function(t,e){var a=t.commit;a("updateInstallsList",e)},updateBackupEmail:function(t,e){var a=t.commit;a("updateBackupEmail",e)}},mutations:{updateApiStatus:function(t,e){t.apiStatus=e},updateWpeUid:function(t,e){t.wpeUid=e},updateWpePwd:function(t,e){t.wpePwd=e},updateInstallsList:function(t,e){t.installsList=e},updateBackupEmail:function(t,e){t.backupEmail=e}}}),E=a("8c4f"),x=a("58ca"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.installsReady?"error"==t.installsReady?a("div",{staticClass:"install-list-message"},[t._m(0)]):a("div",{staticClass:"install-list"},[a("section",{staticClass:"search-wrapper",class:{"search-wrapper--hidden":!t.showNavbar}},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Find a site"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("ul",[a("transition-group",{attrs:{name:"fade"}},t._l(t.resultQuery,(function(e,s){return a("li",{key:"install-"+s},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.resultData,expression:"$store.state.resultData"}],staticClass:"link columns",attrs:{to:{path:"/install",query:{installid:e.id}}}},[a("span",{staticClass:"install-name"},[t._v(t._s(e.name))]),a("EnvLabel",{attrs:{env:e.environment}})],1)],1)})),0)],1)])]):a("div",{staticClass:"install-list-message"},[a("div",{staticClass:"load-spinner"})])},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-message"},[a("span",{staticClass:"icon material-icons"},[t._v("priority_high")]),a("h2",[t._v("Invalid credentials")])])}],j=(a("a623"),a("4de4"),a("caad"),a("ac1f"),a("2532"),a("1276"),a("bc3a")),A=a.n(j),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"env-label",class:t.env},[t._v(" "+t._s(t.envLabel())+" ")])},B=[],D={name:"ListItemRouter",props:{env:String},methods:{envLabel:function(){switch(this.env){case"production":return"Prod";case"staging":return"Stag";case"development":return"Dev"}}}},R=D,W=(a("463d"),Object(l["a"])(R,I,B,!1,null,"30c7301e",null)),M=W.exports,N={name:"Index",components:{EnvLabel:M},data:function(){return{searchQuery:null,showNavbar:!0,lastScrollPosition:0,wpe_uid:"",wpe_pwd:"",installs:[],installsReady:!1}},methods:{getApiState:function(){this.$store.state.apiStatus&&(this.wpe_keys=this.$store.state.apiStatus,this.wpe_uid=this.$store.state.wpeUid,this.wpe_pwd=this.$store.state.wpePwd),this.getInstalls()},getInstalls:function(){var t=this,e={headers:{Authorization:"Basic "+btoa(this.wpe_uid+":"+this.wpe_pwd)}};A.a.get("https://api.wpengineapi.com/v1/installs?limit=200",e).then((function(e){return t.installs=e.data.results})).then((function(){t.$store.commit("updateInstallsList",t.installs),t.installsReady=!0})).catch((function(){t.installsReady="error"}))},onScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop;t<0||Math.abs(t-this.lastScrollPosition)<60||(this.showNavbar=t<this.lastScrollPosition,this.lastScrollPosition=t)}},beforeMount:function(){this.getApiState()},mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)},computed:{resultQuery:function(){var t=this;return this.searchQuery?this.installs.filter((function(e){return t.searchQuery.toLowerCase().split(" ").every((function(t){return e.name.toLowerCase().includes(t)}))})):this.installs}}},U=N,q=(a("a026"),Object(l["a"])(U,L,O,!1,null,null,null)),Q=q.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"api-setup"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns"},[a("h2",[t._v("Log in to WP Engine")]),t._m(0),a("form",[a("p",[a("label",[t._v(" API Username "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.wpe_uid,expression:"wpe_uid"}],attrs:{type:"text",id:"input-wpe-uid",disabled:t.wpe_keys},domProps:{value:t.wpe_uid},on:{input:function(e){e.target.composing||(t.wpe_uid=e.target.value)}}})])]),a("p",[a("label",[t._v(" API Password "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.wpe_pwd,expression:"wpe_pwd"}],attrs:{type:"password",id:"input-wpe-pwd",disabled:t.wpe_keys},domProps:{value:t.wpe_pwd},on:{input:function(e){e.target.composing||(t.wpe_pwd=e.target.value)}}})])]),a("p",[t.wpe_keys?a("input",{staticClass:"button danger",attrs:{type:"reset",value:"Delete API keys"},on:{click:function(e){return e.preventDefault(),t.resetKeys()}}}):a("input",{staticClass:"button",attrs:{type:"submit",value:"Save API keys"},on:{click:function(e){return e.preventDefault(),t.saveKeys()}}})])])])])])},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" Generate API credentials from your WP Engine account and paste them here to connect. "),a("br"),a("a",{staticClass:"link",attrs:{href:"https://wpengine.com/support/enabling-wp-engine-api/",target:"_blank"}},[t._v(" Learn how "),a("span",{staticClass:"material-icons"},[t._v("launch")])])])}],Y=(a("38cf"),{name:"ApiSetup",components:{},data:function(){return{wpe_keys:!1,wpe_uid:"",wpe_pwd:""}},methods:{getApiState:function(){this.$store.state.apiStatus&&(this.wpe_keys=this.$store.state.apiStatus,this.wpe_uid=this.$store.state.wpeUid,this.wpe_pwd="*".repeat(this.$store.state.wpePwd.length))},saveKeys:function(){this.wpe_keys=!0,this.$store.commit("updateApiStatus",!0),this.$store.commit("updateWpeUid",this.wpe_uid),this.$store.commit("updateWpePwd",this.wpe_pwd)},resetKeys:function(){this.wpe_keys=!1,this.$store.commit("updateApiStatus",!1),this.$store.commit("updateWpeUid",""),this.$store.commit("updateWpePwd",""),this.wpe_uid="",this.wpe_pwd=""}},beforeMount:function(){this.getApiState()}}),z=Y,H=(a("0575"),Object(l["a"])(z,T,K,!1,null,null,null)),J=H.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"install-page"},[a("div",{staticClass:"row"},[a("ul",[a("ListItemRouter",{attrs:{label:"Backup",icon:"backup",link:{path:"/new-backup",query:{installid:t.install.id}}}}),a("ListItemRouter",{attrs:{label:"Clear cache",icon:"cached",link:{path:"/clear-cache",query:{installid:t.install.id}}}}),a("ListItemRouter",{attrs:{label:"Open site",icon:"launch",href:"https://"+t.install.primary_domain+"/"}})],1)]),a("section",{staticClass:"open-in-wpe-wrapper"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns"},[a("a",{staticClass:"button",attrs:{href:"https://my.wpengine.com/installs/"+t.install.name+"/",target:"_blank"}},[t._v("Open in WP Engine")])])])])])},G=[],F=(a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.label?a("li",[t.link?a("router-link",{attrs:{to:t.link}},[t.icon?a("span",{staticClass:"material-icons",domProps:{textContent:t._s(t.icon)}}):t._e(),t._v(" "+t._s(t.label)+" ")]):a("a",{attrs:{href:"href",target:"_blank"}},[t.icon?a("span",{staticClass:"material-icons",domProps:{textContent:t._s(t.icon)}}):t._e(),t._v(" "+t._s(t.label)+" ")])],1):t._e()}),V=[],Z={name:"ListItemRouter",props:{label:String,icon:String,link:Object,href:String}},tt=Z,et=(a("cab0"),Object(l["a"])(tt,F,V,!1,null,"01842dc4",null)),at=et.exports,st={name:"Start",components:{ListItemRouter:at},props:["installid"],data:function(){var t=this;return{install:this.$store.state.installsList.find((function(e){return e.id===t.installid}))}},methods:{}},it=st,nt=(a("da88"),Object(l["a"])(it,X,G,!1,null,null,null)),rt=nt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-backup"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns"},[a("h2",[t._v("Create backup: "+t._s(t.install.name))]),t._m(0)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"column"},[a("form",{on:{submit:t.onSubmit}},[a("p",[a("label",[t._v(" Backup description "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.backup.description,expression:"backup.description"}],attrs:{type:"text",id:"input-wpe-uid",required:""},domProps:{value:t.backup.description},on:{input:function(e){e.target.composing||t.$set(t.backup,"description",e.target.value)}}})])]),a("p",[a("label",[t._v(" Send notification to "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.backup.notification_emails,expression:"backup.notification_emails"}],attrs:{type:"text",id:"input-wpe-pwd",required:""},domProps:{value:t.backup.notification_emails},on:{input:function(e){e.target.composing||t.$set(t.backup,"notification_emails",e.target.value)}}}),a("span",{staticClass:"footnote"},[t._v("Separate email addresses with commas")])])]),a("p",["wait"!==t.backupStatus?a("input",{staticClass:"button",attrs:{type:"submit",value:"Create backup"}}):t._e(),"wait"==t.backupStatus?a("input",{staticClass:"button",attrs:{type:"submit",disabled:"",value:"Please wait ..."}}):t._e()]),"done"==t.backupStatus?a("MessageSuccess"):t._e()],1)])])])},ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(' Create a backup to save the current version of your environment. If you make changes to your environment and would like to revert to a previous version, select from the list below and click "Restore". '),a("br"),a("a",{staticClass:"link",attrs:{href:"https://wpengine.com/support/restore/",target:"_blank"}},[t._v(" Learn more about backup points "),a("span",{staticClass:"material-icons"},[t._v("launch")])])])}],ut=(a("a4d3"),a("e01a"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"message-success"},[a("span",{staticClass:"material-icons"},[t._v("done")]),t._v(" Success ")])}],pt={name:"ListItemRouter"},dt=pt,mt=(a("dafd"),Object(l["a"])(dt,ut,lt,!1,null,"28ca70c7",null)),ht=mt.exports,ft={name:"NewBackup",props:["installid"],components:{MessageSuccess:ht},data:function(){var t=this;return{install:this.$store.state.installsList.find((function(e){return e.id===t.installid})),backupStatus:"ready",wpe_uid:"",wpe_pwd:"",backup:{description:"",notification_emails:[]}}},methods:{getApiState:function(){this.$store.state.apiStatus&&(this.wpe_keys=this.$store.state.apiStatus,this.wpe_uid=this.$store.state.wpeUid,this.wpe_pwd=this.$store.state.wpePwd)},getDefaultEmails:function(){this.$store.state.backupEmail&&(this.backup.notification_emails=this.$store.state.backupEmail)},query:function(t){return JSON.stringify(t)},onSubmit:function(t){var e=this;t.preventDefault(),console.log(this.query(this.backup)),this.backupStatus="wait";var a={description:this.backup.description,notification_emails:this.backup.notification_emails.split(/[ ,]+/)},s={headers:{Authorization:"Basic "+btoa(this.wpe_uid+":"+this.wpe_pwd)}};A.a.post("https://api.wpengineapi.com/v1/installs/".concat(this.install.id,"/backups"),a,s).then((function(){e.$store.commit("updateBackupEmail",e.backup.notification_emails),e.backupStatus=!0,setTimeout((function(){e.backupStatus="done"}),6e4)}))}},beforeMount:function(){this.getApiState(),this.getDefaultEmails()}},vt=ft,wt=(a("a1af"),Object(l["a"])(vt,ot,ct,!1,null,null,null)),_t=wt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-backup"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns"},[a("h2",[t._v("Clear cache: "+t._s(t.install.name))]),t._m(0)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"column"},[a("form",{on:{submit:t.onSubmit}},[a("p",[0==t.cacheStatus?a("input",{staticClass:"button",attrs:{type:"submit",value:"Clear cache"}}):t._e(),"wait"==t.cacheStatus?a("input",{staticClass:"button",attrs:{type:"submit",disabled:"",value:"Please wait ..."}}):t._e(),1==t.cacheStatus?a("input",{staticClass:"button",attrs:{type:"submit",disabled:"",value:"Wait 1 minute"}}):t._e()]),1==t.cacheStatus?a("MessageSuccess"):t._e()],1)])])])},gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" Clear your cache when you want browsers to display the latest version of your page. "),a("br"),a("a",{staticClass:"link",attrs:{href:"https://wpengine.com/support/cache/",target:"_blank"}},[t._v(" Learn more about page caching "),a("span",{staticClass:"material-icons"},[t._v("launch")])])])}],kt={name:"NewBackup",props:["installid"],components:{MessageSuccess:ht},data:function(){var t=this;return{install:this.$store.state.installsList.find((function(e){return e.id===t.installid})),cacheStatus:!1,wpe_uid:"",wpe_pwd:""}},methods:{getApiState:function(){this.$store.state.apiStatus&&(this.wpe_keys=this.$store.state.apiStatus,this.wpe_uid=this.$store.state.wpeUid,this.wpe_pwd=this.$store.state.wpePwd)},onSubmit:function(t){var e=this;t.preventDefault(),this.cacheStatus="wait";var a={type:"object"},s={headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(this.wpe_uid+":"+this.wpe_pwd)}};A.a.post("https://api.wpengineapi.com/v1/installs/".concat(this.install.id,"/purge_cache"),a,s).then((function(){e.cacheStatus=!0,setTimeout((function(){e.cacheStatus=!1}),6e4)}))}},beforeMount:function(){this.getApiState()}},yt=kt,St=(a("29c3"),Object(l["a"])(yt,bt,gt,!1,null,null,null)),Ct=St.exports;s["a"].use(E["a"]),s["a"].use(x["a"]);var $t=new E["a"]({base:"/",routes:[{path:"/",name:"installsList",component:Q,meta:{depth:1}},{path:"/api-setup",name:"apiSetup",component:J,meta:{depth:2}},{path:"/install",name:"installPage",component:rt,meta:{depth:2},props:function(t){return{installid:t.query.installid}}},{path:"/new-backup",name:"newBackup",component:_t,meta:{depth:3},props:function(t){return{installid:t.query.installid}}},{path:"/clear-cache",name:"clearCache",component:Ct,meta:{depth:3},props:function(t){return{installid:t.query.installid}}}]});$t.beforeEach((function(t,e,a){var s=P.state.apiStatus;"apiSetup"===t.name||s?a():a({name:"apiSetup"})}));var Pt=$t;a("6abf"),a("c48f"),a("50b2");s["a"].config.productionTip=!1,new s["a"]({router:Pt,store:P,render:function(t){return t(y)}}).$mount("#app")},"0ada":function(t,e,a){},1140:function(t,e,a){},"11aa":function(t,e,a){"use strict";a("0224")},"183a":function(t,e,a){t.exports=a.p+"img/wpe-mini-logo.f04398c0.svg"},"26b3":function(t,e,a){"use strict";a("5f82")},"29c3":function(t,e,a){"use strict";a("0ada")},"37e6":function(t,e,a){},"463d":function(t,e,a){"use strict";a("fa31")},5002:function(t,e,a){},"50b2":function(t,e,a){},"5f82":function(t,e,a){},"6abf":function(t,e,a){},7249:function(t,e,a){},"75d2":function(t,e,a){},"8c9c":function(t,e,a){},a026:function(t,e,a){"use strict";a("75d2")},a1af:function(t,e,a){"use strict";a("37e6")},ad4e:function(t,e,a){},c48f:function(t,e,a){},cab0:function(t,e,a){"use strict";a("8c9c")},d748:function(t,e,a){"use strict";a("1140")},da88:function(t,e,a){"use strict";a("7249")},dafd:function(t,e,a){"use strict";a("ad4e")},fa31:function(t,e,a){}});
//# sourceMappingURL=popup.c59f9a70.js.map